<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para Irene ‚Äî Feliz 2026 ‚ú®</title>
  <meta name="theme-color" content="#0b1020" />
  <style>
    :root{
      --bg:#0b1020;
      --text:#eef1ff;
      --muted:#b7c0ff;
      --accent:#ffd36a;
      --stroke:rgba(255,255,255,.16);
      --shadow: 0 22px 70px rgba(0,0,0,.55);
      --radius:20px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 20% 5%, #1b2a63 0%, transparent 55%),
        radial-gradient(900px 600px at 85% 20%, #103a4a 0%, transparent 55%),
        radial-gradient(900px 600px at 40% 85%, #3a2454 0%, transparent 55%),
        linear-gradient(180deg, #070a14 0%, var(--bg) 35%, #070a14 100%);
      overflow-x:hidden;
    }
    .wrap{width:min(980px, 92vw); margin:0 auto; padding:22px 0 70px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:10px 6px; flex-wrap:wrap;
    }
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding:9px 12px;
      border:1px solid var(--stroke);
      border-radius:999px;
      background: rgba(255,255,255,.06);
      color:var(--muted);
      font-size:14px;
      backdrop-filter: blur(8px);
    }
    .chip b{color:var(--text)}
    .actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      appearance:none; border:1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:650;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
      user-select:none;
      touch-action: manipulation;
    }
    .btn:hover{background: rgba(255,255,255,.12)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      border-color: rgba(255,211,106,.5);
      background: rgba(255,211,106,.14);
    }
    .btn.ghost{background: rgba(0,0,0,.18)}

    .panel{
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      overflow:hidden;
    }

    /* HERO */
    .hero{margin-top:14px}
    .heroGrid{display:grid; grid-template-columns: 1fr 380px; gap:0}
    @media (max-width: 920px){ .heroGrid{grid-template-columns:1fr} }
    .left{padding:22px 22px 16px 22px}
    .title{margin:0; font-size: clamp(26px, 3.5vw, 40px); line-height:1.08}
    .spark{color: var(--accent); text-shadow: 0 0 20px rgba(255,211,106,.25)}
    .subtitle{margin:10px 0 0 0; color:var(--muted); font-size:15px; line-height:1.55; max-width:60ch}
    .tags{margin-top:16px; display:flex; gap:10px; flex-wrap:wrap}
    .tag{
      padding:8px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size: 13px;
    }
    .right{
      border-left: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.08));
      padding:18px;
      display:grid; place-items:center;
    }
    @media (max-width: 920px){
      .right{border-left:0; border-top:1px solid rgba(255,255,255,.10)}
    }

    /* ENVELOPE */
    .envelope{
      width: min(330px, 86vw);
      aspect-ratio: 4 / 3;
      position:relative;
      transform: translateZ(0);
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    /* Base por si no pones foto */
    .envBase{
      position:absolute; inset:0;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.16);
      overflow:hidden;
    }
    .envBottom{
      position:absolute; inset:0;
      background: linear-gradient(135deg, rgba(255,211,106,.14), rgba(123,231,255,.08));
      opacity:.35;
    }

    /* FOTO EN EL SOBRE (la eliges t√∫) */
    .envPhoto{
      position:absolute;
      inset:0;
      border-radius:18px;
      overflow:hidden;
      display:none; /* se activa si hay URL */
    }
    .envPhoto img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(1.05) contrast(1.05);
      transform: scale(1.02);
    }
    .envPhoto::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg,
        rgba(0,0,0,.10),
        rgba(0,0,0,.38)
      );
    }
    .envGlass{
      position:absolute; inset:0;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.03);
      pointer-events:none;
    }

    .envFlap{
      position:absolute; left:0; right:0; top:-2px;
      height:58%;
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .7s cubic-bezier(.2,.8,.2,1);
      border-top-left-radius:18px;
      border-top-right-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.08));
      border:1px solid rgba(255,255,255,.14);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      backface-visibility:hidden;
    }
    .letterMock{
      position:absolute;
      left:8%; right:8%;
      top:16%;
      height:72%;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 16px 30px rgba(0,0,0,.35);
      transform: translateY(28px);
      transition: transform .7s cubic-bezier(.2,.8,.2,1), opacity .35s ease;
      opacity:.95;
      padding:14px;
      display:flex; flex-direction:column; gap:10px;
    }
    .miniLine{height:10px; border-radius: 8px; background: rgba(255,255,255,.10)}
    .miniLine.w1{width:78%}
    .miniLine.w2{width:90%}
    .miniLine.w3{width:62%}
    .seal{
      position:absolute; width:46px; height:46px;
      left:50%; top:58%;
      transform: translate(-50%, -50%);
      border-radius: 999px;
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.35), rgba(0,0,0,.15)),
                  linear-gradient(180deg, rgba(255,211,106,.35), rgba(255,211,106,.12));
      border:1px solid rgba(255,211,106,.45);
      display:grid; place-items:center;
      font-weight:900;
      color: rgba(255,255,255,.92);
      text-shadow: 0 2px 14px rgba(255,211,106,.25);
      pointer-events:none;
    }
    .openHint{margin-top:12px; font-size:13px; color:var(--muted); text-align:center}
    .openHint b{color:var(--text)}

    /* Open state */
    .opened .envFlap{transform: rotateX(180deg)}
    .opened .letterMock{transform: translateY(-12px); opacity:1}

    /* LETTER PAPER (real content) */
    main{margin-top:16px; display:none; gap:14px}
    .paperWrap{padding:18px}
    .paper{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      overflow:hidden;
    }
    .paperHead{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .paperHead .small{color:var(--muted); font-size:13px}
    .paperBody{padding:16px}
    .letterTitle{
      margin:0 0 10px 0;
      font-size:18px;
      letter-spacing:.2px;
    }
    .typeArea{
      font-size:15px;
      line-height:1.7;
      color: var(--text);
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 160px;
    }
    .cursor{
      display:inline-block;
      width:10px;
      transform: translateY(2px);
      animation: blink 1s steps(1) infinite;
      color: var(--accent);
      font-weight:900;
    }
    @keyframes blink{50%{opacity:0}}

    .photoBox{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:start;
    }
    @media (max-width: 820px){ .photoBox{grid-template-columns:1fr} }

    .photo{
      width:100%;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .photo img{width:100%; height:auto; display:block}

    .blocks{display:grid; gap:10px}
    .block{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.14);
      padding:14px;
    }
    .block h3{margin:0; font-size:15px}
    .block p{margin:6px 0 0 0; color:var(--muted); font-size:14px; line-height:1.55}

    .voucher{
      margin-top:12px;
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      padding:14px;
      border-radius: 16px;
      border:1px solid rgba(255,211,106,.22);
      background: linear-gradient(180deg, rgba(255,211,106,.10), rgba(0,0,0,.14));
    }
    .voucher b{color:var(--accent)}
    .voucher small{color:var(--muted); display:block; margin-top:4px}

    /* Toast + confetti */
    .toast{
      position:fixed; left:50%; bottom:18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.65);
      border:1px solid rgba(255,255,255,.14);
      color:var(--text);
      padding:10px 12px;
      border-radius: 12px;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      opacity:0; pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      backdrop-filter: blur(10px);
      max-width: min(560px, 92vw);
      font-size:14px;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-2px)}
    .confetti{position:fixed; inset:0; pointer-events:none; overflow:hidden}
    .piece{
      position:absolute;
      width:10px; height:14px;
      border-radius:3px;
      opacity:.88;
      transform: translateY(-40px) rotate(0deg);
      animation: fall linear forwards;
    }
    @keyframes fall{
      to { transform: translateY(calc(100vh + 60px)) rotate(560deg); opacity:.98; }
    }

    @media (prefers-reduced-motion: reduce){
      .envFlap, .letterMock{transition:none}
      .cursor{animation:none}
      .piece{display:none}
    }
  </style>
</head>

<body>
  <div class="confetti" id="confetti"></div>

  <div class="wrap">
    <header>
      <div class="chip">‚ú® <span>Para <b id="toNameChip">Irene</b> ‚Äî <b>2026</b></span></div>
      <div class="actions">
        <button class="btn ghost" id="skipBtn" type="button">Saltar animaci√≥n</button>
        <button class="btn" id="printBtn" type="button">Imprimir / PDF</button>
        <button class="btn primary" id="openBtn" type="button">Abrir la carta</button>
      </div>
    </header>

    <section class="hero panel" id="hero">
      <div class="heroGrid">
        <div class="left">
          <h1 class="title"><span id="toNameTitle">Irene</span>, <span class="spark">feliz 2026</span> ‚ú®</h1>
          <p class="subtitle" id="introText">
            Quer√≠a dejarte algo bonito para empezar el a√±o: una carta para recordarte todo lo que has conseguido,
            incluso cuando las cosas se pusieron dif√≠ciles.
          </p>
          <div class="tags">
            <span class="tag">Cerca, pero con cuidado</span>
            <span class="tag">Sin drama</span>
            <span class="tag">Con verdad</span>
          </div>
        </div>

        <div class="right">
          <div>
            <div class="envelope" id="envelope" role="button" aria-label="Abrir carta" tabindex="0">
              <!-- base (fallback) -->
              <div class="envBase" id="envBase"><div class="envBottom"></div></div>

              <!-- foto elegida por ti -->
              <div class="envPhoto" id="envPhoto">
                <img id="envImg" alt="Imagen del sobre" />
              </div>
              <div class="envGlass"></div>

              <!-- carta ‚Äúasomando‚Äù -->
              <div class="letterMock" aria-hidden="true">
                <div class="miniLine w2"></div>
                <div class="miniLine w1"></div>
                <div class="miniLine w3"></div>
                <div class="miniLine w2"></div>
              </div>

              <div class="envFlap"></div>
              <div class="seal" id="seal">I</div>
            </div>
            <div class="openHint">Pulsa <b>‚ÄúAbrir la carta‚Äù</b> o toca el sobre</div>
          </div>
        </div>
      </div>
    </section>

    <main id="content" class="panel">
      <div class="paperWrap">
        <div class="paper">
          <div class="paperHead">
            <div class="small" id="paperMeta">1 de enero de 2026</div>
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn ghost" id="copyTextBtn" type="button">Copiar carta</button>
              <button class="btn" id="confettiBtn" type="button">Confeti ‚ú®</button>
            </div>
          </div>

          <div class="paperBody">
            <h2 class="letterTitle" id="letterHeading">Para Irene</h2>
            <div class="typeArea" id="typeArea"></div>

            <div class="photoBox" id="photoBox" style="display:none">
              <div class="photo"><img id="photoImg" alt="Foto" /></div>
              <div class="blocks" id="blocks"></div>
            </div>

            <div class="voucher">
              <div>
                <div><b>Vale por:</b> caf√© + paseo cuando te apetezca ‚òïÔ∏èüö∂‚Äç‚ôÄÔ∏è</div>
                <small>Caduca: nunca. Presi√≥n: cero.</small>
              </div>
              <button class="btn primary" id="voucherBtn" type="button">Canjear (modo gui√±o)</button>
            </div>

          </div>
        </div>
      </div>
    </main>

    <div class="toast" id="toast"></div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    // =========================
    // 1) PERSONALIZA AQU√ç
    // =========================
    const CONFIG = {
      toName: "Irene",
      fromName: "‚Äî Yo",
      dateText: "1 de enero de 2026",

      // IMAGEN DEL SOBRE (la que t√∫ decidas):
      // - Si est√° en la misma carpeta: "sobre.jpg" o "sobre.png"
      // - Si es URL: "https://..."
      envelopeImageUrl: "sobre.jpg",

      // Foto dentro de la carta (opcional). Si no quieres, d√©jalo vac√≠o.
      photoUrl: "", // ej: "foto.jpg" o "https://.../foto.jpg"

      // Carta: escribe aqu√≠ tu texto (en p√°rrafos)
      letterParagraphs: [
        "Irene,\n",
        "Quer√≠a empezar 2026 dej√°ndote esto por escrito, porque hay cosas que en el d√≠a a d√≠a se dicen poco: estoy orgulloso de ti.\n",
        "Este a√±o no ha sido f√°cil, y aun as√≠ has seguido. A veces con fuerza, a veces con cansancio, a veces simplemente tirando‚Ä¶ pero has seguido. Y eso vale much√≠simo.\n",
        "Has conseguido cosas que quiz√° desde fuera parecen peque√±as, pero en realidad son enormes: levantarte cuando te costaba, volver a intentar, cuidarte un poco m√°s, poner l√≠mites cuando tocaba, y seguir siendo t√∫ incluso en d√≠as grises.\n",
        "Ojal√° 2026 te trate con m√°s calma, m√°s luz y m√°s ratitos buenos. Y si en alg√∫n momento te apetece compartir alguno de esos ratitos conmigo‚Ä¶ yo encantado.\n",
        "\nFeliz 2026, Irene ‚ú®\n"
      ],

      // ‚ÄúTarjetitas‚Äù a la derecha (si pones foto en la carta)
      highlightBlocks: [
        { title: "Lo que has hecho bien", text: "Seguir adelante incluso cuando no apetec√≠a." },
        { title: "Lo que has aprendido", text: "Que cuidarte tambi√©n es avanzar." },
        { title: "Lo que te mereces", text: "Un a√±o m√°s suave y con m√°s sonrisas." }
      ]
    };

    // =========================
    // 2) ELEMENTOS
    // =========================
    const hero = document.getElementById("hero");
    const openBtn = document.getElementById("openBtn");
    const envelope = document.getElementById("envelope");
    const content = document.getElementById("content");
    const typeArea = document.getElementById("typeArea");
    const toNameTitle = document.getElementById("toNameTitle");
    const toNameChip = document.getElementById("toNameChip");
    const seal = document.getElementById("seal");
    const paperMeta = document.getElementById("paperMeta");
    const letterHeading = document.getElementById("letterHeading");

    const envPhoto = document.getElementById("envPhoto");
    const envImg = document.getElementById("envImg");

    const photoBox = document.getElementById("photoBox");
    const photoImg = document.getElementById("photoImg");
    const blocks = document.getElementById("blocks");

    const skipBtn = document.getElementById("skipBtn");
    const printBtn = document.getElementById("printBtn");
    const copyTextBtn = document.getElementById("copyTextBtn");
    const confettiBtn = document.getElementById("confettiBtn");
    const voucherBtn = document.getElementById("voucherBtn");

    const toast = document.getElementById("toast");

    // =========================
    // 3) PINTAR DATOS
    // =========================
    toNameTitle.textContent = CONFIG.toName;
    toNameChip.textContent = CONFIG.toName;
    seal.textContent = (CONFIG.toName || "I").trim().charAt(0).toUpperCase();
    paperMeta.textContent = CONFIG.dateText;
    letterHeading.textContent = `Para ${CONFIG.toName}`;

    // Imagen del sobre
    if (CONFIG.envelopeImageUrl && CONFIG.envelopeImageUrl.trim() !== "") {
      envImg.src = CONFIG.envelopeImageUrl.trim();
      envPhoto.style.display = "block";
    }

    // Foto + bloques dentro de la carta
    if (CONFIG.photoUrl && CONFIG.photoUrl.trim() !== "") {
      photoImg.src = CONFIG.photoUrl.trim();
      photoBox.style.display = "grid";

      blocks.innerHTML = "";
      for (const b of CONFIG.highlightBlocks) {
        const d = document.createElement("div");
        d.className = "block";
        d.innerHTML = `<h3>${escapeHtml(b.title)}</h3><p>${escapeHtml(b.text)}</p>`;
        blocks.appendChild(d);
      }
    }

    // =========================
    // 4) ANIMACI√ìN + TYPEWRITER
    // =========================
    let opened = false;
    let typing = false;
    let cancelTyping = false;

    function openLetter(){
      if (opened) return;
      opened = true;

      hero.classList.add("opened");
      envelope.classList.add("opened");
      popConfetti(18);

      content.style.display = "block";
      setTimeout(() => content.scrollIntoView({behavior:"smooth", block:"start"}), 220);

      startTyping();
    }

    function startTyping(){
      if (typing) return;
      typing = true;
      cancelTyping = false;

      typeArea.textContent = "";
      const cursor = document.createElement("span");
      cursor.className = "cursor";
      cursor.textContent = "‚ñç";
      typeArea.appendChild(cursor);

      const fullText = CONFIG.letterParagraphs.join("");
      let i = 0;

      const tick = () => {
        if (cancelTyping){
          typeArea.textContent = fullText + "\n" + CONFIG.fromName;
          typing = false;
          return;
        }

        if (i >= fullText.length){
          typeArea.textContent = fullText + "\n" + CONFIG.fromName;
          typing = false;
          return;
        }

        cursor.insertAdjacentText("beforebegin", fullText.charAt(i));
        i++;

        const ch = fullText.charAt(i-1);
        const base = (ch === "\n") ? 120 : 22;
        const jitter = Math.random() * 22;
        setTimeout(tick, base + jitter);
      };

      tick();
    }

    function skipTyping(){
      cancelTyping = true;
      if (!opened) openLetter();
      showToast("Animaci√≥n saltada ‚úÖ");
    }

    // =========================
    // 5) EVENTOS (robusto en m√≥vil)
    // =========================
    openBtn.addEventListener("click", openLetter);

    // click + pointerup para que funcione mejor en visores raros
    envelope.addEventListener("click", openLetter);
    envelope.addEventListener("pointerup", openLetter);

    // accesibilidad: enter/espacio
    envelope.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") openLetter();
    });

    skipBtn.addEventListener("click", skipTyping);
    printBtn.addEventListener("click", () => window.print());

    copyTextBtn.addEventListener("click", async () => {
      const fullText = CONFIG.letterParagraphs.join("") + "\n" + CONFIG.fromName;
      try{
        await navigator.clipboard.writeText(fullText);
        showToast("Carta copiada ‚úÖ");
      }catch{
        showToast("No se pudo copiar autom√°tico (en iPhone a veces falla).");
      }
    });

    confettiBtn.addEventListener("click", () => popConfetti(18));

    voucherBtn.addEventListener("click", () => {
      popConfetti(14);
      showToast("Vale activado üòÑ Un d√≠a lo canjeamos cuando te apetezca.");
    });

    // =========================
    // 6) CONFETI + TOAST
    // =========================
    function popConfetti(n){
      const c = document.getElementById("confetti");
      for (let i=0;i<n;i++){
        const d = document.createElement("div");
        d.className = "piece";
        d.style.left = (Math.random()*100) + "vw";
        d.style.top = (-30 - Math.random()*50) + "px";
        d.style.background = `hsl(${Math.random()*360}, 90%, 70%)`;
        d.style.animationDuration = (1.6 + Math.random()*1.6) + "s";
        d.style.width = (8 + Math.random()*8) + "px";
        d.style.height = (10 + Math.random()*10) + "px";
        c.appendChild(d);
        setTimeout(() => d.remove(), 3800);
      }
    }

    let toastTimer = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.remove("show"), 2600);
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
  });
  </script>
</body>
</html>
